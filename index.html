<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Barcelona Lockers</title>
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css" rel="stylesheet">
  <style>
    body, html, #map { margin: 0; padding: 0; width: 100%; height: 100%; }
    .locker-marker { font-size: 24px; color: #EA4335; text-shadow: 0 0 3px white; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    // 1. Initialize map
    mapboxgl.accessToken = 'pk.eyJ1IjoiZW1hbnVsZWxlIiwiYSI6ImNtYm81ZnQzNTE0czkyanF5OXE4YmRnZ3oifQ.suw4swpVFR1lqHa_-50-gA';
    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v12',
      center: [2.1734, 41.3851],
      zoom: 12
    });

    // 2. Add lockers after map loads
    map.on('load', () => {
      const lockers = [
        { id: 1, name: "BCN Airport", lng: 2.0833, lat: 41.2974 },
        { id: 2, name: "Barcelona Sants", lng: 2.1406, lat: 41.3796 },
        { id: 3, name: "EstaciÃ³ de FranÃ§a", lng: 2.1836, lat: 41.3850 },
        { id: 4, name: "Passeig de GrÃ cia", lng: 2.1657, lat: 41.3919 },
        { id: 5, name: "Clot-AragÃ³", lng: 2.1864, lat: 41.4106 },
        { id: 6, name: "Barcelona Nord", lng: 2.1814, lat: 41.3936 }
      ];

      lockers.forEach(l => {
        const el = document.createElement('div');
        el.className = 'locker-marker';
        el.innerHTML = 'ðŸ”’';
        new mapboxgl.Marker(el)
          .setLngLat([l.lng, l.lat])
          .addTo(map);
      });
    });

    // 3. Handle potential errors
    map.on('error', (e) => {
      console.error("Map error:", e.error);
      alert("Map failed to load. Check console.");
    });
  </script>
</body>
</html>
